---
title: 绘图工具-PlantUML
date: 2020-06-22 12:32:54
tags: 工具
---

> 在写文档的过程中，经常需要进行画图。虽然说现在有很多类似viso之类的可视化画图工具，但是还是要花费大量时间在拖拉组件上，效率十分低下。最近在网上找到了一款还算不错的绘图工具-- Plantuml, 它本质上是也算一门可以快速画图的设计语言，学习起来也很方便。可以在http://plantuml.com/网站上体验一下。
>  在vscode, webstorm都有相关的插件可以使用。

# 时序图

时序图相对来说是平常比较经常画的一种设计图稿，在这里记录一下plantuml中相关的语法。

## 基本用法



```puml
@startuml
A -> B: do something
B -> A: do something
@enduml
```

![img](https:////upload-images.jianshu.io/upload_images/112263-454b0519a685e7d3.png?imageMogr2/auto-orient/strip|imageView2/2/w/143/format/webp)

image.png

## 设置不同的角色

时序图角色可以分为: actor, boundary, control, entity, database，每种角色呈现的图形也是不一样的。



```puml
@startuml
actor Foo1
boundary Foo2
control Foo3
entity Foo4
database Foo5
collections Foo6
Foo1 -> Foo2 : To boundary
Foo1 -> Foo3 : To control
Foo1 -> Foo4 : To entity
Foo1 -> Foo5 : To database
Foo1 -> Foo6 : To collections

@enduml
```

![img](https:////upload-images.jianshu.io/upload_images/112263-adf81a1ddfaff6d7.png?imageMogr2/auto-orient/strip|imageView2/2/w/365/format/webp)

image.png

## 不用的箭头样式



```puml
@startuml
Bob ->x Alice
Bob -> Alice
Bob ->> Alice
Bob -\ Alice
Bob \\- Alice
Bob //-- Alice

Bob ->o Alice
Bob o\\-- Alice

Bob <-> Alice
Bob <->o Alice
Bob -[#red]> Alice : hello
Alice -[#0000FF]->Bob : ok
@enduml
```

![img](https:////upload-images.jianshu.io/upload_images/112263-5f3ded42458f4cdf.png?imageMogr2/auto-orient/strip|imageView2/2/w/115/format/webp)

image.png

## 分页



```puml
@startuml

Alice -> Bob : message 1
Alice -> Bob : message 2

newpage

Alice -> Bob : message 3
Alice -> Bob : message 4

newpage A title for the\nlast page

Alice -> Bob : message 5
Alice -> Bob : message 6
@enduml
```

![img](https:////upload-images.jianshu.io/upload_images/112263-4d2240208bb0af66.png?imageMogr2/auto-orient/strip|imageView2/2/w/157/format/webp)

image.png

## 分段



```puml
@startuml

== Initialization ==

Alice -> Bob: Authentication Request
Bob --> Alice: Authentication Response

== Repetition ==

Alice -> Bob: Another authentication Request
Alice <-- Bob: another authentication Response

@enduml
```

![img](https:////upload-images.jianshu.io/upload_images/112263-235755e22a22874d.png?imageMogr2/auto-orient/strip|imageView2/2/w/283/format/webp)

image.png

## 生命线



```puml
@startuml
participant User

User -> A: DoWork
activate A #FFBBBB

A -> A: Internal call
activate A #DarkSalmon

A -> B: << createRequest >>
activate B

B --> A: RequestCreated
deactivate B
deactivate A
A -> User: Done
deactivate A

@enduml
```

![img](https:////upload-images.jianshu.io/upload_images/112263-15fb638cdecc0dd7.png?imageMogr2/auto-orient/strip|imageView2/2/w/280/format/webp)

image.png

## 图例注脚等



```puml
@startuml

header Page Header
footer Page %page% of %lastpage%

title Example Title

Alice -> Bob : message 1
note left: this is a first note

Alice -> Bob : message 2

@enduml
```

![img](https:////upload-images.jianshu.io/upload_images/112263-bcf655490e617e8d.png?imageMogr2/auto-orient/strip|imageView2/2/w/263/format/webp)

image.png

# C4架构图

C4 model是一种软件架构图的设计方法，具体介绍可以参考[C4 architecture model](https://www.infoq.cn/article/C4-architecture-model)。利用[C4-PlantUML](https://github.com/RicardoNiepel/C4-PlantUML)工具，可以画出很多很不错的架构图。
 C4模型分为Context, Container, Component和Code 4个组成部分，我们一般在画图的时候主要用到前三个组成部分。



```puml
@startuml C4_Elements
!includeurl https://raw.githubusercontent.com/RicardoNiepel/C4-PlantUML/master/C4_Context.puml
!includeurl https://raw.githubusercontent.com/RicardoNiepel/C4-PlantUML/master/C4_Container.puml
!includeurl https://raw.githubusercontent.com/RicardoNiepel/C4-PlantUML/master/C4_Component.puml

System(systemAlias, "System", "这可以看作系统上下文(Context)")
Container(containerAlias, "Container", "这是Container")
Person(personAlias, "Person", "这可以看作是组件(Component)")

Rel(personAlias, containerAlias, "Label", "设置关联关系")
@enduml
```

![img](https:////upload-images.jianshu.io/upload_images/112263-8e43d01e616e0c20.png?imageMogr2/auto-orient/strip|imageView2/2/w/484/format/webp)